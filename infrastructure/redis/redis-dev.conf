# Redis Development Configuration for Aether Mailer
# Optimized for development environment

# Network Configuration
bind 0.0.0.0
port 6379
protected-mode no

# Security Configuration (development only)
# requirepass dev-redis-2025

# General Configuration
daemonize no
pidfile /tmp/redis-dev.pid
loglevel verbose
logfile ""

# Database Configuration
databases 16
# Disable RDB snapshots in development for faster performance
save ""

# Memory Management
maxmemory 256mb
maxmemory-policy allkeys-lru

# Persistence Configuration (minimal for development)
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum no
dbfilename dump-dev.rdb
dir /tmp/redis-dev/

# AOF Configuration (disabled for development speed)
appendonly no

# Client Configuration
timeout 0
tcp-keepalive 300
tcp-backlog 511

# Slow Log Configuration (more verbose for development)
slowlog-log-slower-than 1000
slowlog-max-len 256

# Latency Monitoring
latency-monitor-threshold 50

# Event Notification (enabled for development debugging)
notify-keyspace-events "AKE"

# Development Optimizations
hash-max-ziplist-entries 256
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 256
zset-max-ziplist-entries 64
zset-max-ziplist-value 32

# Active Rehashing
activerehashing yes

# Client Output Buffer Limits (relaxed for development)
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# Client Query Buffer Limit
client-query-buffer-limit 512mb

# Protocol Max Bulk Request Size
proto-max-bulk-len 512mb

# Frequency of rehashing
hz 10

# Dynamic HZ
dynamic-hz yes

# AOF Rewrite Incremental fsync
aof-rewrite-incremental-fsync yes

# RDB Save Incremental fsync
rdb-save-incremental-fsync yes

# Development-specific TTL values
session:ttl 3600          # 1 hour for development
cache:ttl 300             # 5 minutes
rate-limit:window 60      # 1 minute
rate-limit:max 50         # More permissive for development
api-cache:ttl 60          # 1 minute
health:ttl 30             # 30 seconds
metrics:ttl 120           # 2 minutes
security-events:ttl 1800  # 30 minutes
domain-verify:ttl 1800    # 30 minutes
email-verify:ttl 600      # 10 minutes
password-reset:ttl 300    # 5 minutes
2fa:ttl 120               # 2 minutes
temp:ttl 60               # 1 minute
notifications:ttl 3600    # 1 hour
search:ttl 300            # 5 minutes
audit:ttl 86400           # 1 day
perf:ttl 60               # 1 minute

# Development debugging commands (uncomment for debugging)
# rename-command FLUSHDB FLUSHDB_DEV
# rename-command FLUSHALL FLUSHALL_DEV
# rename-command KEYS KEYS_DEV
# rename-command DEBUG DEBUG_DEV

# Development monitoring
# Enable command stats for development debugging
# CONFIG SET commandstats yes

# Development-specific settings
# Allow dangerous commands for development
# rename-command CONFIG CONFIG_DEV
# rename-command CLIENT CLIENT_DEV

# Development memory optimization
# Lower memory usage for development
maxmemory-samples 5

# Development connection settings
# Allow more connections for development
maxclients 1000

# Development persistence
# Save less frequently in development
save 300 1
save 60 100

# Development logging
# More verbose logging for debugging
syslog-enabled yes
syslog-ident redis-dev
syslog-facility local0

# Development performance monitoring
# Enable more detailed monitoring
latency-monitor-threshold 10

# Development security (relaxed)
# Allow dangerous commands for development
# rename-command SHUTDOWN SHUTDOWN_DEV
# rename-command MODULE MODULE_DEV

# Development clustering (disabled)
# cluster-enabled no

# Development sentinel (disabled)
# port 26379

# Development modules (optional)
# loadmodule /path/to/redisearch-dev.so
# loadmodule /path/to/redisjson-dev.so

# Development testing configuration
# Enable test mode for unit tests
# test-mode yes

# Development backup configuration
# Backup every hour in development
# save 3600 1

# Development replication (disabled)
# replica-serve-stale-data yes
# replica-read-only yes

# Development pub/sub
# Enable pub/sub for real-time features
# pubsub-mode yes

# Development transactions
# Enable transaction monitoring
# transaction-monitoring yes

# Development Lua scripting
# Enable Lua scripting for custom commands
# lua-time-limit 5000

# Development bitmap operations
# Enable bitmap operations for analytics
# bitmap-enabled yes

# Development hyperloglog
# Enable HyperLogLog for analytics
# hll-enabled yes

# Development geospatial
# Enable geospatial operations
# geo-enabled yes

# Development streams
# Enable Redis Streams for job queues
# streams-enabled yes

# Development modules configuration
# Module-specific development settings
# redisearch:
#   max-results 100
#   timeout 1000

# redisjson:
#   max-size 1mb
#   max-depth 100

# redistimeseries:
#   retention 86400
#   max-samples 1000

# Development debugging
# Enable debugging features
# debug-enabled yes
# debug-level verbose
# debug-file /tmp/redis-debug.log

# Development profiling
# Enable profiling for performance analysis
# profiling-enabled yes
# profiling-sample-rate 0.1

# Development health checks
# Enable health checks
# health-check-enabled yes
# health-check-interval 30

# Development metrics
# Enable detailed metrics
# metrics-enabled yes
# metrics-interval 10

# Development alerts
# Enable alerts for monitoring
# alerts-enabled yes
# alerts-threshold 80

# Development backup
# Enable automatic backups
# backup-enabled yes
# backup-interval 3600
# backup-retention 7

# Development cleanup
# Enable automatic cleanup
# cleanup-enabled yes
# cleanup-interval 300
# cleanup-threshold 1000